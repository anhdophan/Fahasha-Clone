@model IEnumerable<DoAn.Models.Product>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/masterlayout.cshtml";
}

<link href="~/Content/MainStyle.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css" integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css" integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<div class="fls">
    <div class="fls-header">
        <div class="fls-text">
            @*<img style="border-radius: 30px 30px 30px 30px; height: 50px; " src="~/Content/Đô án/Category/Icon_PhienChoCu.png">*@
            <h2>Gợi Ý Cho Bạn</h2>
        </div>
    </div>
    @{

        // Kiểm tra tình trạng đăng nhập của người dùng
        bool isLoggedIn = (Session["isLoggedIn"] != null && (bool)Session["isLoggedIn"]);

        // Đường dẫn tới trang thông tin cá nhân
        var topSel = @Html.Partial("_TopSelling", Model);


        // Đường dẫn tới trang đăng nhập
        var suggestPro = @Html.Partial("SuggestedProducts", Model);

        // Xác định đường dẫn chuyển hướng dựa trên tình trạng đăng nhập
        var redirectUrl = isLoggedIn ? suggestPro : topSel;
    }
        @redirectUrl
</div>
</div>
<div class="fls">
    <div class="fls-header">
        <div class="fls-text">
            @*<img style="border-radius: 30px 30px 30px 30px; height: 50px; " src="~/Content/Đô án/Category/Icon_PhienChoCu.png">*@
            <h2>Sách Trong Nước</h2>
        </div>
    </div>
    <div class="fls-main">
        <div class="item-sale">

            @{
                string desiredCategory = "001";
                var filteredProducts = Model
                    .Where(pro => pro.Category != null && pro.Category.Trim().Equals(desiredCategory, StringComparison.OrdinalIgnoreCase));
            }


            @foreach (var pro in filteredProducts)
            {
                <div class="fls-item">

                    <img src="@Url.Content(pro.ImagePro)" />
                    <div class="fls-item-infor">@Html.DisplayFor(model => pro.NamePro)</div>
                    <div class="fls-item-price">
                        <div class="fls-price-special">@Html.DisplayFor(model => pro.Price)</div>
                    </div>
                    <a href="/Product/Details/@pro.ProductID" class="btn btn-default" style="text-decoration:none;">Chi Tiết</a>
                </div>
            }
        </div>
        <a  href="/Product/Pro_Cate?category=001" style="text-decoration: none; color: white;"><div class="view-more">Xem Thêm</div></a>
    </div>
</div>

<div class="fls">
    <div class="fls-header">
        <div class="fls-text">
            @*<img style="border-radius: 40px 40px 40px 40px; height: 40px; " src="~/Content/Đô án/Category/Icon_Manga.png">*@
            <h2>Manga</h2>

        </div>
    </div>
    <div class="fls-main">
        <div class="item-sale">

            @{
                desiredCategory = "002";

                filteredProducts = Model
                                    .Where(pro => pro.Category != null && pro.Category.Trim().Equals(desiredCategory, StringComparison.OrdinalIgnoreCase));            }

            @foreach (var pro in filteredProducts)
            {

                <div class="fls-item">

                    <img src="@Url.Content(pro.ImagePro)" />
                    <div class="fls-item-infor">@Html.DisplayFor(model => pro.NamePro)</div>
                    <div class="fls-price-special">@Html.DisplayFor(model => pro.Price)</div>
                    <a href="/Product/Details/@pro.ProductID" class="btn btn-default" style="text-decoration:none;">Chi Tiết</a>
                </div>
            }
        </div>
        <a href="/Product/Pro_Cate?category=002" style="text-decoration: none; color: white;"><div class="view-more">Xem Thêm</div></a>
    </div>
</div>
<div class="fls">
    <div class="fls-header">
        <div class="fls-text">
            @*<img style="border-radius: 30px 30px 30px 30px; height: 50px; " src="~/Content/Đô án/Category/Icon_PhienChoCu.png">*@
            <h2>Foreign Book</h2>
        </div>
    </div>
    <div class="fls-main">
        <div class="item-sale">

            @{
                desiredCategory = "003";

                filteredProducts = Model
                                    .Where(pro => pro.Category != null && pro.Category.Trim().Equals(desiredCategory, StringComparison.OrdinalIgnoreCase));            }

            @foreach (var pro in filteredProducts)
            {

                <div class="fls-item">

                    <img src="@Url.Content(pro.ImagePro)" />
                    <div class="fls-item-infor">@Html.DisplayFor(model => pro.NamePro)</div>
                    <div class="fls-price-special">@Html.DisplayFor(model => pro.Price)</div>
                    <a href="/Product/Details/@pro.ProductID" class="btn btn-default" style="text-decoration:none;">Chi Tiết</a>
                </div>
            }
        </div>
        <a href="/Product/Pro_Cate?category=003" style="text-decoration: none; color: white;"><div class="view-more">Xem Thêm</div></a>
    </div>
</div>
<div class="fls">
    <div class="fls-header">
        <div class="fls-text">
            @*<img style="border-radius: 30px 30px 30px 30px; height: 50px; " src="~/Content/Đô án/Category/Icon_MayTinh.png">*@
            <h2>VPP - Dụng Cụ Học Tập</h2>
        </div>
    </div>
    <div class="fls-main">
        <div class="item-sale">

            @{
                desiredCategory = "004";

                filteredProducts = Model
                                    .Where(pro => pro.Category != null && pro.Category.Trim().Equals(desiredCategory, StringComparison.OrdinalIgnoreCase));            }

            @foreach (var pro in filteredProducts)
            {

                <div class="fls-item">

                    <img src="@Url.Content(pro.ImagePro)" />
                    <div class="fls-item-infor">@Html.DisplayFor(model => pro.NamePro)</div>
                    <div class="fls-price-special">@Html.DisplayFor(model => pro.Price)</div>
                    <a href="/Product/Details/@pro.ProductID" class="btn btn-default" style="text-decoration:none;">Chi Tiết</a>
                </div>
            }
        </div>
        <a href="/Product/Pro_Cate?category=004" style="text-decoration: none; color: white;"><div class="view-more">Xem Thêm</div></a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js" integrity="sha512-HGOnQO9+SP1V92SrtZfjqxxtLmVzqZpjFFekvzZVWoiASSQgSr4cw9Kqd2+l8Llp4Gm0G8GIFJ4ddwZilcdb8A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.js" integrity="sha512-eP8DK17a+MOcKHXC5Yrqzd8WI5WKh6F1TIk5QZ/8Lbv+8ssblcz7oGC8ZmQ/ZSAPa7ZmsCU4e/hcovqR8jfJqA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="~/Scripts/scroll.js"></script>